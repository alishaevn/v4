---
title: Class Components to Functions
date: 2021-01-15
published: true
heroImage: ''
category: Dev
blurb: How do you use hooks and where did my lifecycle methods go??
---

Recently I was asked to give a presentation on how I went about converting class components in a React Native app, into functional ones. While there's not exactly a cookie cutter recipe, some of the main commonalities I've come across are below.

Underneath each heading is an example of a class, with the relevant parts to that heading. Next to how I converted that class into a function.

## Declaring the function and props
- While I prefer using arrow functions for const declarations, it's not mandatory
- You can destructure props in the argument, or just pass in `props` 
- Remove the render and enclosing curly braces
- Destructuring the props in the argument means I don't need a return block

<table>

<tr>
	<th> Class </th>
    <th></th>
	<th> Function </th>
</tr>

<tr>
<td>

```js
import React, { Component } from 'react'
import { Button, View } from 'react-native'

class Form extends Component {
    render() {
        const { submitText } = this.props

        return (
            <View>
                <Button text={submitText} />
            </View>
        )
    }
}

export default Form
```

</td>
<td> Function </td>
<td>

```js
import React from 'react'
import { Button, View } from 'react-native'

const Form = ({ submitText }) => (
    <View>
        <Button text={submitText}/>
    </View>
)







export default Form
```

</td>
</tr>

</table>


## Removing the constructor
- Convert variables declared with `this`, to a `const`
- `useRef` instead of `createRef`
- No `this.state`, instead we have the `useState` hook

<table>

<tr>
	<th> Class </th>
    <th></th>
	<th> Function </th>
</tr>

<tr>
<td>

```js
import React, { Component } from 'react'
import { View } from 'react-native'

class Form extends Component {
    constructor(props) {
        super(props)
        this.state = {
            name: '',
            email: '',
        }
        this.nameRef = React.createRef()
        this.emailRef = React.createRef()
    }

    render() {
        return <View></View>
   }
}

export default Form
```

</td>
<td> Function </td>
<td>

```js
import React, { useRef, useState } from 'react'
import { View } from 'react-native'

const Form = () => {
    const [name, setName] = useState('')
    const [email, setEmail] = useState('')
    const nameRef = useRef()
    const emailRef = useRef()

    return <View></View>
}








export default Form
```

</td>
</tr>

</table>


## Converting componentDidMount()
- Replace the `componentDidMount` lifecycle method with the `useEffect` hook
- Remember to add the empty brackets as a callback
- Convert variables declared with `this`, to a `const`
- If there's a `componentWillUnmount`, add that with a return statement to the `useEffect` hook

<table>

<tr>
	<th> Class </th>
    <th></th>
	<th> Function </th>
</tr>

<tr>
<td>

```js
import React, { Component } from 'react'
import { View } from 'react-native'

class Form extends Component {
    componentDidMount() {
        this.keyboardDidHide = Keyboard.addListener(
            'keyboardDidHide',
            this._keyboardDidHide
        )
    }

    componentWillUnmount() {
        this.keyboardDidHide.remove()
    }

    _keyboardDidHide = () => this.props.scrollDown()

    render() {
        return <View></View>
    }
}

export default Form
```

</td>
<td> Function </td>
<td>

```js
import React, { useEffect } from 'react'
import { View } from 'react-native'

const Form = ({ scrollDown, submitText }) => {
    useEffect(() => {
        const keyboardDidHide = Keyboard.addListener(
            'keyboardDidHide',
            _keyboardDidHide
        )

        return () => {
            keyboardDidHide.remove()
        }
    }, [])

    const _keyboardDidHide = () => scrollDown()

    return <View></View>
}



export default Form
```

</td>
</tr>

</table>


## Converting helper functions
- Functions defined outside of the render now need a variable declaration
- `this.setState({})` is replaced by the `useState` hook

<table>

<tr>
	<th> Class </th>
    <th></th>
	<th> Function </th>
</tr>

<tr>
<td>

```js
import React, { Component } from 'react'
import { View } from 'react-native'

class Form extends Component {
    constructor(props) {
        super(props)
        this.state = {
            name: '',
            email: '',
        }
    }
    
    resetTextFields = () => {
        this.setState({
            name: '',
            email: '',
        })
    }

    render() {
        return <View></View>
    }
}

export default Form
```

</td>
<td> Function </td>
<td>

```js
import React, { useState } from 'react'
import { View } from 'react-native'

const Form = () => {
    const [name, setName] = useState('')
    const [email, setEmail] = useState('')

    const resetTextFields = () => {
        setName('')
        setEmail('')
    }

    return <View></View>
}










export default Form
```

</td>
</tr>

</table>


# The final picture!

<table>

<tr>
	<th> Class </th>
    <th></th>
	<th> Function </th>
</tr>

<tr>
<td>

```js
import React, { Component } from 'react'
import { Button, TextInput, View } from 'react-native'

class Form extends Component {
    constructor(props) {
        super(props)
        this.state = { name: '' }
        this.nameRef = React.createRef()
    }

	onChange = field => value => this.setState({ [field]: value })

    render() {
		const { submitText } = this.props

        return (
            <View>
                <TextInput
                    value={name}
                    ref={this.nameRef}
                    onChangeText={this.onChange('name')}
                />
            </View>
			<Button text={submitText}/>
        )
    }
}

export default Form
```

</td>
<td> Function </td>
<td>

```js
import React, { useRef, useState } from 'react'
import { Button, TextInput, View } from 'react-native'

const Form = ({ submitText }) => {
    const [name, setName] = useState('')
    const nameRef = useRef()

    return (
        <View>
            <TextInput
                value={name}
                ref={nameRef}
                onChangeText={name => setName(name)}
            />
			<Button text={submitText}/>
        </View>
    )
}










export default Form
```

</td>
</tr>

</table>
